function $(e){return document.getElementById(e)}function storageGet(e,t){try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch{return t}}function storageSet(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{}}function prefersReducedMotion(){return window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}function injectHeaderFooter(e){const t=`
<header>
  <div class="nav">
  <a href="index.html" class="brand" aria-label="Home"><div class="logo">DR</div> <span>DeFiâ€‘RealEstate</span></a>
    <div class="grow"></div>
    <button class="menu-btn" id="menuBtn" aria-label="Menu" aria-expanded="false" aria-controls="primaryNav">â˜°</button>
    <nav role="navigation" aria-label="Primary" id="primaryNav">
      <a href="index.html" data-page="home" data-i18n="nav_home">Home</a>
      <a href="dividends.html" data-page="dividends" data-i18n="nav_dividends">Dividend Tracker</a>
      <a href="growth.html" data-page="growth" data-i18n="nav_growth">Growth & Forecast</a>
      <a href="marketplace.html" data-page="market" data-i18n="nav_market">Marketplace</a>
      <a href="admin.html" data-page="admin" data-i18n="nav_admin">Admin</a>
    </nav>
    <div class="controls">
      <select id="langSel" aria-label="Language">
        <option value="en">ðŸ‡ºðŸ‡¸ English</option>
        <option value="vi">ðŸ‡»ðŸ‡³ Tiáº¿ng Viá»‡t</option>
  </select>
    </div>
  </div>
</header>`,n=`
<footer role="contentinfo">
  <div class="foot">
    <div>Â© <span id="yr"></span> DeFiâ€‘RealEstate â€¢ <span data-i18n="foot_rights">All rights reserved.</span></div>
    <div class="muted">Made for demo â€” mock data only. Â· <a href="https://sonnil.github.io/DeFi-RealEstate/" target="_blank" rel="noopener">Live site</a> Â· <a href="https://github.com/Sonnil/DeFi-RealEstate/issues" target="_blank" rel="noopener">Report issue</a></div>
  </div>
</footer>`;document.body.insertAdjacentHTML("afterbegin",t),document.body.insertAdjacentHTML("beforeend",n);try{const e=document.querySelector("header .nav"),t=document.getElementById("menuBtn");if(t&&e){t.addEventListener("click",(()=>{const n=e.classList.toggle("show-menu");t.setAttribute("aria-expanded",String(n))}));const n=e.querySelectorAll("nav a");n.forEach((n=>n.addEventListener("click",(()=>{e.classList.contains("show-menu")&&(e.classList.remove("show-menu"),t.setAttribute("aria-expanded","false"))}))))}}catch{}"function"==typeof initHeader&&initHeader(e)}function openModal(e,t){const n=$(e),o=$(t);if(n&&o){o.classList.add("show"),n.classList.add("show");const r=n.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),a=r[0],d=r[r.length-1];function l(e){"Tab"===e.key?(e.shiftKey&&document.activeElement===a?(e.preventDefault(),d.focus()):!e.shiftKey&&document.activeElement===d&&(e.preventDefault(),a.focus())):"Escape"===e.key&&closeModal(n.id,o.id)}n.dataset.trap="1",document.addEventListener("keydown",l),n.__trapHandler=l,setTimeout((()=>{var e;return null===(e=a)||void 0===e?void 0:e.focus()}),0)}}function closeModal(e,t){const n=$(e),o=$(t);n&&o&&(o.classList.remove("show"),n.classList.remove("show"),n.__trapHandler&&(document.removeEventListener("keydown",n.__trapHandler),delete n.__trapHandler))}function onlyDigits(e){try{return(e||"").replace(/\D/g,"")}catch{return""}}function luhnCheck(e){const t=onlyDigits(e);if(!t||t.length<13||t.length>19)return!1;let n=0,o=!1;for(let e=t.length-1;e>=0;e--){let r=t.charCodeAt(e)-48;if(r<0||r>9)return!1;o&&(r*=2,r>9&&(r-=9)),n+=r,o=!o}return n%10==0}function validExpiry(e){if(!e)return!1;const t=String(e).match(/^(\d{2})\s*\/\s*(\d{2}|\d{4})$/);if(!t)return!1;let n=parseInt(t[1],10),o=parseInt(t[2],10);if(n<1||n>12)return!1;o<100&&(o+=2e3);const r=new Date,a=r.getFullYear(),d=r.getMonth()+1;return o>a||o===a&&n>=d}function formatCardNumber(e){const t=onlyDigits(e).slice(0,19);return t.replace(/(.{4})/g,"$1 ").trim()}
