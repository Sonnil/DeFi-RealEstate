function swUpdateToast(n){try{var e=document.getElementById("sw-update");if(e)return;e=document.createElement("div"),e.id="sw-update",e.setAttribute("role","status"),e.style.cssText="position:fixed;left:12px;bottom:12px;z-index:9999;background:#0f172a;color:#e2e8f0;border:1px solid #23314d;padding:10px 12px;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,.35);display:flex;gap:10px;align-items:center";var a=localStorage.getItem("lang")||document.documentElement.lang||"en",s=typeof I18N==="object"&&(I18N[a]||I18N.en)||{},t=document.createElement("span");t.textContent=s.sw_update_available||"New version available";var o=document.createElement("button");o.id="sw-refresh",o.textContent=s.sw_refresh||"Refresh",o.style.cssText="background:#2563eb;color:#fff;border:0;padding:6px 10px;border-radius:8px;cursor:pointer",o.addEventListener("click",function(){n&&n()});var r=document.createElement("button");r.textContent=s.sw_dismiss||"Dismiss",r.className="secondary",r.style.cssText="background:#1b2133;color:#e2e8f0;border:1px solid #2a3550;padding:6px 10px;border-radius:8px;cursor:pointer",r.addEventListener("click",function(){var n=document.getElementById("sw-update");n&&n.remove()}),e.appendChild(t),e.appendChild(o),e.appendChild(r),document.body.appendChild(e)}catch{}}
"serviceWorker" in navigator&&navigator.serviceWorker.ready.then(e=>{function n(n){n&&n.addEventListener("statechange",()=>{"installed"===n.state&&navigator.serviceWorker.controller&&swUpdateToast(()=>{e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),setTimeout(()=>location.reload(),150)})})}try{n(e.installing||e.waiting),e.addEventListener&&e.addEventListener("updatefound",()=>n(e.installing)),navigator.serviceWorker.addEventListener("controllerchange",()=>{var n=document.getElementById("sw-update");n&&n.remove()})}catch{}}).catch(()=>{});
