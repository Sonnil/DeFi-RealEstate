const I18N={en:{nav_home:"Home",nav_dividends:"Dividend Tracker",nav_growth:"Growth & Forecast",nav_market:"Marketplace",nav_admin:"Admin",demo_mode:"Demo data enabled",cta_browse:"Browse deals",cta_track:"Track dividends",mission_badge:"Own real estate, fractionally & transparently",hero_title:"Real estate investing for everyday investors",hero_sub:"DeFi‑RealEstate makes property investing simple: select vetted deals, invest from $500, and track dividends & growth with built‑in analytics.",kpi_secure:"Non‑custodial: you control allocations",kpi_tools:"Built‑in analytics & forecasting",kpi_bilingual:"English / Vietnamese",how_1_t:"Fractional shares",how_1_d:"Invest from $500. Build a diversified portfolio across markets and property types.",how_2_t:"Transparent returns",how_2_d:"Track dividends and equity growth with clear tables and simple charts.",how_3_t:"Owner & investor tools",how_3_d:"Owners can list offerings; investors can reserve allocations and propose amounts.",div_title:"Dividend Tracker",div_desc:"Log your payouts and forecast future income.",div_amount:"Amount ($)",div_date:"Date",add:"Add",export:"Export CSV",clear:"Clear",t_date:"Date",t_amount:"Amount",t_total:"Total",div_forecast_t:"Dividend Forecast",f_current:"Current principal ($)",f_yield:"Annual yield (%)",f_contrib:"Monthly contribution ($)",f_years:"Years",f_reinvest:"Reinvest dividends?",yes:"Yes",no:"No",run:"Run Forecast",t_year:"Year",t_income:"Income",t_balance:"Balance",g_title:"Property Growth & Equity Forecast",g_purchase:"Purchase price ($)",g_down:"Down payment (%)",g_rate:"Interest rate (%)",g_term:"Term (years)",g_app:"Appreciation/yr (%)",g_extra:"Extra principal/mo ($)",g_table:"Year‑by‑Year",t_value:"Value",t_principal:"Principal Paid",t_equity:"Equity",t_cagr:"CAGR",m_title:"Marketplace (Demo)",m_desc:"Browse mock listings, open the Invest modal, and propose an allocation (min $500).",m_search:"Search",m_type:"Type",m_beds:"Beds (min)",m_min:"Min Price",m_max:"Max Price",m_sort:"Sort",any:"Any",type_sf:"Single Family",type_con:"Condo",type_th:"Townhome",sort_new:"Newest",sort_pa:"Price ↑",sort_pd:"Price ↓",sort_cap:"Cap Rate ↓",invest:"Invest",available:"Available",raise:"Raise",a_title:"Admin — Add Property (Demo)",a_desc:"Add demo listings. They appear in the Marketplace and are stored locally for this session.",a_address:"Address",a_type:"Type",a_price:"Price ($)",a_cap:"Cap Rate (%)",a_beds:"Beds",a_baths:"Baths",a_sqft:"Sqft",a_raise:"Total Raise ($)",a_img:"Image URL",a_desc_label:"Description",a_current:"Current Offerings",t_address:"Address",t_price:"Price",t_raise:"Raise",t_available:"Available",inv_name:"Your name",inv_amount:"Amount ($) — min $500",cancel:"Cancel",foot_rights:"All rights reserved."},vi:{nav_home:"Trang chủ",nav_dividends:"Cổ tức",nav_growth:"Tăng trưởng & Dự báo",nav_market:"Thị trường",nav_admin:"Quản trị",demo_mode:"Chế độ dữ liệu demo",cta_browse:"Xem dự án",cta_track:"Theo dõi cổ tức",mission_badge:"Sở hữu BĐS theo phần trăm, minh bạch",hero_title:"Đầu tư bất động sản cho mọi nhà đầu tư",hero_sub:"DeFi‑RealEstate giúp đầu tư BĐS dễ dàng: chọn dự án đã thẩm định, đầu tư từ $500 và theo dõi cổ tức & tăng trưởng bằng công cụ tích hợp.",kpi_secure:"Tự quản phân bổ vốn",kpi_tools:"Phân tích & dự báo tích hợp",kpi_bilingual:"Tiếng Anh / Tiếng Việt",how_1_t:"Sở hữu theo phần",how_1_d:"Đầu tư từ $500. Đa dạng hóa danh mục theo khu vực & loại hình.",how_2_t:"Lợi nhuận minh bạch",how_2_d:"Theo dõi cổ tức & vốn chủ sở hữu bằng bảng và biểu đồ đơn giản.",how_3_t:"Công cụ cho chủ & NĐT",how_3_d:"Chủ sở hữu đăng dự án; nhà đầu tư giữ chỗ & đề xuất số tiền.",div_title:"Theo dõi cổ tức",div_desc:"Ghi nhận chi trả và dự báo thu nhập.",div_amount:"Số tiền ($)",div_date:"Ngày",add:"Thêm",export:"Xuất CSV",clear:"Xóa",t_date:"Ngày",t_amount:"Số tiền",t_total:"Tổng",div_forecast_t:"Dự báo cổ tức",f_current:"Vốn hiện tại ($)",f_yield:"Lợi suất năm (%)",f_contrib:"Góp hàng tháng ($)",f_years:"Số năm",f_reinvest:"Tái đầu tư cổ tức?",yes:"Có",no:"Không",run:"Chạy dự báo",t_year:"Năm",t_income:"Thu nhập",t_balance:"Số dư",g_title:"Dự báo Tăng trưởng & Vốn chủ",g_purchase:"Giá mua ($)",g_down:"Trả trước (%)",g_rate:"Lãi suất (%)",g_term:"Kỳ hạn (năm)",g_app:"Tăng giá/năm (%)",g_extra:"Trả gốc thêm/tháng ($)",g_table:"Theo từng năm",t_value:"Giá trị",t_principal:"Gốc đã trả",t_equity:"Vốn chủ",t_cagr:"CAGR",m_title:"Thị trường (Demo)",m_desc:"Duyệt danh sách mẫu, mở hộp đăng ký đầu tư và đề xuất khoản đầu tư (tối thiểu $500).",m_search:"Tìm kiếm",m_type:"Loại",m_beds:"Phòng ngủ (tối thiểu)",m_min:"Giá tối thiểu",m_max:"Giá tối đa",m_sort:"Sắp xếp",any:"Bất kỳ",type_sf:"Nhà riêng",type_con:"Căn hộ",type_th:"Nhà liền kề",sort_new:"Mới nhất",sort_pa:"Giá ↑",sort_pd:"Giá ↓",sort_cap:"Tỷ suất vốn hóa ↓",invest:"Đầu tư",available:"Còn mở",raise:"Kêu gọi",a_title:"Quản trị — Thêm dự án (Demo)",a_desc:"Thêm danh sách demo. Hiển thị ở Thị trường và lưu cục bộ trong phiên.",a_address:"Địa chỉ",a_type:"Loại",a_price:"Giá ($)",a_cap:"Tỷ suất vốn hóa (%)",a_beds:"Phòng ngủ",a_baths:"Phòng tắm",a_sqft:"Diện tích (sqft)",a_raise:"Số vốn kêu gọi ($)",a_img:"Ảnh URL",a_desc_label:"Mô tả",a_current:"Dự án hiện có",t_address:"Địa chỉ",t_price:"Giá",t_raise:"Kêu gọi",t_available:"Còn mở",inv_name:"Tên của bạn",inv_amount:"Số tiền ($) — tối thiểu $500",cancel:"Hủy",foot_rights:"Giữ mọi quyền."}};function applyI18n(e){const t=I18N[e]||I18N.en;document.querySelectorAll("[data-i18n]").forEach(e=>{const n=e.getAttribute("data-i18n");t[n]&&(e.textContent=t[n])}),localStorage.setItem("lang",e),document.documentElement.lang=e}function initHeader(e){const t=localStorage.getItem("lang")||"en",n=document.getElementById("langSel");n&&(n.value=t,n.addEventListener("change",e=>applyI18n(e.target.value))),applyI18n(t),document.querySelectorAll("nav a").forEach(t=>{t.dataset.page===e&&t.classList.add("active")});const a=document.getElementById("yr");a&&(a.textContent=(new Date).getFullYear())}function formatMoney(e){return(null==e?void 0:e.toLocaleString(void 0,{style:"currency",currency:"USD"}))||"$0"}function drawLine(e,t){const n=document.getElementById(e);if(!n)return;const a=n.getContext("2d"),o=n.width=n.clientWidth,i=n.height;a.clearRect(0,0,o,i);const d=Math.max(...t,10),l=30,r=(o-2*l)/((t.length-1)||1),c=(i-2*l)/d;a.strokeStyle="#cbd5e1",a.lineWidth=1,a.beginPath(),a.moveTo(l,i-l),a.lineTo(o-l,i-l),a.lineTo(o-l,l),a.stroke(),a.strokeStyle="#2563eb",a.lineWidth=2,a.beginPath(),t.forEach((e,t)=>{const n=l+t*r,c=i-l-e*c;0===t?a.moveTo(n,c):a.lineTo(n,c)}),a.stroke(),a.fillStyle="#2563eb",t.forEach((e,t)=>{const n=l+t*r,c=i-l-e*c;a.beginPath(),a.arc(n,c,3,0,2*Math.PI),a.fill()}),a.fillStyle="#475569",a.font="12px system-ui",a.fillText("0",5,i-l+4),a.fillText(d.toLocaleString(),5,l+6)}function getMockListings(){let e=JSON.parse(localStorage.getItem("demo_listings")||"null");return e||(e=[{id:"P-001",ts:Date.now()-172800000,address:"123 Palm Avenue, Orlando, FL",type:"Single Family",price:420000,beds:3,baths:2,sqft:1850,capRate:5.6,totalRaise:120000,availableRaise:80000,image:"https://images.unsplash.com/photo-1600585154340-1e4ce9a4c24f?q=80&w=1200&auto=format&fit=crop",description:"Beautiful single-family home near Lake Eola with modern kitchen and spacious backyard.",sourceUrl:"#"},{id:"P-002",ts:Date.now()-432000000,address:"88 Ocean Drive, Miami, FL",type:"Condo",price:1250000,beds:4,baths:3,sqft:2800,capRate:6.1,totalRaise:400000,availableRaise:400000,image:"https://images.unsplash.com/photo-1505691938895-1758d7feb511?q=80&w=1200&auto=format&fit=crop",description:"Luxury beachfront property with stunning ocean views and private pool.",sourceUrl:"#"},{id:"P-003",ts:Date.now()-72000000,address:"456 Maple Street, Tampa, FL",type:"Single Family",price:350000,beds:3,baths:2,sqft:1600,capRate:5.2,totalRaise:100000,availableRaise:75000,image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?q=80&w=1200&auto=format&fit=crop",description:"Charming home in a quiet neighborhood, perfect for families or rental income.",sourceUrl:"#"}],localStorage.setItem("demo_listings",JSON.stringify(e))),e}function saveMockListings(e){localStorage.setItem("demo_listings",JSON.stringify(e))}"serviceWorker" in navigator && window.addEventListener("load",()=>{navigator.serviceWorker.register("sw.js").catch(()=>{})});
function swUpdateToast(n){try{var e=document.getElementById("sw-update");if(e)return;e=document.createElement("div"),e.id="sw-update",e.setAttribute("role","status"),e.style.cssText="position:fixed;left:12px;bottom:12px;z-index:9999;background:#0f172a;color:#e2e8f0;border:1px solid #23314d;padding:10px 12px;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,.35);display:flex;gap:10px;align-items:center";var a=localStorage.getItem("lang")||document.documentElement.lang||"en",s=typeof I18N==="object"&&(I18N[a]||I18N.en)||{},t=document.createElement("span");t.textContent=s.sw_update_available||"New version available";var o=document.createElement("button");o.id="sw-refresh",o.textContent=s.sw_refresh||"Refresh",o.style.cssText="background:#2563eb;color:#fff;border:0;padding:6px 10px;border-radius:8px;cursor:pointer",o.addEventListener("click",function(){n&&n()});var r=document.createElement("button");r.textContent=s.sw_dismiss||"Dismiss",r.className="secondary",r.style.cssText="background:#1b2133;color:#e2e8f0;border:1px solid #2a3550;padding:6px 10px;border-radius:8px;cursor:pointer",r.addEventListener("click",function(){var n=document.getElementById("sw-update");n&&n.remove()}),e.appendChild(t),e.appendChild(o),e.appendChild(r),document.body.appendChild(e);var d=!1,i=function(){if(!d){d=!0;var n=document.getElementById("sw-update");n&&n.remove()}},l=setTimeout(i,8e3);e.addEventListener("mouseenter",function(){clearTimeout(l)}),e.addEventListener("focusin",function(){clearTimeout(l)}),e.addEventListener("mouseleave",function(){d||(l=setTimeout(i,3e3))}),e.addEventListener("focusout",function(){d||e.contains(document.activeElement)||(l=setTimeout(i,3e3))})}catch{}}
"serviceWorker" in navigator&&navigator.serviceWorker.ready.then(e=>{function n(n){n&&n.addEventListener("statechange",()=>{"installed"===n.state&&navigator.serviceWorker.controller&&swUpdateToast(()=>{e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),setTimeout(()=>location.reload(),150)})})}try{n(e.installing||e.waiting),e.addEventListener&&e.addEventListener("updatefound",()=>n(e.installing)),navigator.serviceWorker.addEventListener("controllerchange",()=>{var n=document.getElementById("sw-update");n&&n.remove()})}catch{}}).catch(()=>{});
